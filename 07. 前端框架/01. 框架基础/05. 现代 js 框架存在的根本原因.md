## 概述

前端框架的最根本原因是：**解决 `UI` 与状态同步的难题。**

1. 思路

- 组件级重渲染：比如 `React`，当状态改版后，映射出改变后的虚拟 `DOM`，最终改变当前组件映射的真实 `DOM`，这个过程被称为 `reconciliation`。

- 监听修改：比如 `Angluar` 和 `Vue.js`，状态改变直接触发对应 `DOM` 节点中 `value` 值的变化。

这里稍微说明下，`React` 虽然是整体渲染，但在虚拟 `DOM` 作用下，效率不比 `observable` `低。observable` 在值不能完整映射 UI 时，也需要做更大范围的 `rerender`。另外，`Vue.js` 与 `Angluar` 也早已采用了虚拟 `DOM`。

这三个框架已经融会贯通，作者提到的两种思路现在已经是一种混合技术了。

2. `web components`

`React`, `Angluar`, `Vue.js` 与 `web components` 相比，`web components` 最大的问题就是，没有解决 `UI` 与状态同步。

`web components` 只提供了模版语法，自定义标签解决 `html` 的问题，并没有给出一套状态与 `UI` 同步的方法。

所以就算使用 `web components`，可能还需要一个框架做 `UI` 同步，比如 `Vue.js` 或者 `stenciljs`。

3. 总结

- 现代 `js` 框架主要在解决 `UI` 与状态同步的问题。

- 仅使用原生 `js` 难以写出复杂、高效、又容易维护的 `UI` 代码。

- `Web components` 没有解决 `UI` 与状态同步这个主要问题。

- 虽然使用虚拟 `DOM` 库很容易造一个解决问题的框架，但不建议真的这么做！

## `UI` 与状态同步的难题

现代前端框架主要解决 `UI` 与状态同步的问题，这是毫无疑问的，也提到了包括 `web components` 也依然没有解决这个问题。这可能是 `web` 开发最核心的问题了。

最初开发者的精力都在前端标准化上，诞生了一系列解决标准化问题的库，最有知名度的是 `jquery`。当前端进入 `react` 时代后，开发者的精力从解决标准化发展到解决 `web` 规范与实践的冲突，这个冲突正是`UI` 与状态同步的问题。

### 前端三剑客

`html`、`css`、`js` 三者分离各是一套独立的体系，但 `js` 又能同时控制 `html` 与 `css`，为了解决同步问题，最好将控制权全部交给 `js`。

`web components` 解决的是 `html` 问题，注定与 `js` 无关。

官方设计中前端三剑客是相互分离的方案，为了解决现阶段前端框架的问题，`html` 必须由 `js` 完全接管，这几乎就是 `jsx`，或者支持 `template` 语法的 `html`，可这与最初网页设计思路是违背的。

`html` 是独立的，甚至可以不依赖 `js` 运行，这天然导致了 **`UI` 与状态同步**这个难题。

### 为什么一定要用 js

`html` 不依赖 `js` 的设计可能已经跟不上前端发展步伐了，也许 `jsx` 或者 `template` 才是真正的未来。

现代 `web` 页面都使用了 `js` 完全主导网页渲染，所以这已经从技术问题上升到了社会问题，如今禁用 `js` 的浏览器还有多少网页可以正常访问？除了某些超大型网站对禁用 `js` 状态做了特殊优化以外，现在几乎没有前端项目会考虑禁用 `js` 的情况了。

### 为什么不融合 html 与 js

既然事实上 UI 已经与 js 绑定了，那 w3c 为何不将 jsx 或者 template 列为标准呢？也许为了向前兼容，规范永远也迈不出这一步吧。

幸运的是，这并不妨碍现代前端框架的大量普及，而且势不可挡。

[精读《现代 js 框架存在的根本原因》](https://github.com/ascoders/weekly/blob/master/%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/57.%E7%B2%BE%E8%AF%BB%E3%80%8A%E7%8E%B0%E4%BB%A3%20js%20%E6%A1%86%E6%9E%B6%E5%AD%98%E5%9C%A8%E7%9A%84%E6%A0%B9%E6%9C%AC%E5%8E%9F%E5%9B%A0%E3%80%8B.md)

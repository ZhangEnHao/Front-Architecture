1. 系统中被唯一使用

2. 一个类只有 一个实例


```JAVA
public class SingleObject {
  // 注意 私有化构造函数 外部不可 new 只能内部 new
  private SingleObject() {}
  // 唯一被 new 出来的对象
  private SingleObject instance = null;
  // 获取对象的唯一接口
  public SingleObject getInstance() {
    if(instance == null) {
      // 只能 new 一次
      instance = new SingleObject();
    }
    return instance;
  }
  // 对象方法
  public void login() {
    System.out.println("login...")
  }
}

public class SingletonPatternDemo {
  public static void main(String[] args) {
    // 不合法的构造函数
    // 编译时报错：构造函数 SingleObject() 是不可见的
    // SingleObject object = new SingleObject();

    // 获取唯一可用的对象
    SingleObject object = SingleObject.getInstance();
    object.login();
  }
}
```

```JavaScript
// 私有化构造函数
class SingleObject {
  login() {
    console.log(`login...`);
  }
}
// 单例模式
SingleObject.getInstance = (function () {
  let instance;
  return function () {
    if (!instance) {
      instance = new SingleObject()
    }
    return instance
  }
})();

let obj1 = SingleObject.getInstance();
obj1.login();
let obj2 = SingleObject.getInstance();
obj2.login();
console.log(`obj1 === obj2`, obj1 === obj2);
console.log(`---------`);
let obj3 = new SingleObject(); // 无法完全控制
obj3.login();
console.log(`obj1 === obj3`, obj1 === obj3);
```


## 场景 —— JQ 的 $ 和登录框逻辑

1. JQ 的 $

JQuery 无论引用多少次，只有一个 $

```JavaScript
// JQuery 无论引用多少次，只有一个 $
if(window.JQuery !== null) {
  return window.JQuery
}else {
  // 初始化
}
```

2. 登录框

```JavaScript
class LoginForm {
  constructor() {
    this.state = `hide`
  }
  show() {
    if(this.state === `show`) {
      alert(`登录框已经显示`);
      return
    }
    this.state = `show`;
    console.log(`登录框成功显示`);
  }
  hide() {
    if(this.state === `hide`) {
      alert(`登录框已经隐藏`);
      return
    }
    this.state = `hide`;
    console.log(`登录框隐藏显示`);
  }
}

LoginForm.getInstance = (function() {
  let instance;
  return function() {
    if(!instance) {
      instance = new LoginForm();
    }
    return instance
  }
})();

// test 
let login1 = LoginForm.getInstance();
login1.show();
let login2 = LoginForm.getInstance();
login2.show();
login2.hide();
console.log(`login1 === login2`, login1 === login2);

```


## 设计原则验证

- 符合单一职责原则，只实例化唯一的对象

- 没法具体开放封闭原则，但是绝对不违反开放封闭原则

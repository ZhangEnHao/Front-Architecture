## 作用域

作用域其实可理解为该上下文中声明的 变量和声明的作用范围。可分为 全局作用域、 函数作用域和块级作用域。

作用域有上下级的关系，上下级关系的确定就看函数是在哪个作用域下创建的。

作用域最大的用处就是隔离变量，不同作用域下同名变量不会有冲突。

## 从【自由变量】到【作用域链】

1. 什么是“自由变量”

在A作用域中使用的变量x，却没有在A作用域中声明（即在其他作用域中声明的），对于A作用域来说，x就是一个自由变量。

自由变量要到创建这个函数的那个作用域中取值——是“创建”，而不是“调用”。—— 其实这就是所谓的“静态作用域”。

2. 作用域链： 取自由变量时的一步一步“跨”的路线

“作用域链”过程：

  - 第一步，现在当前作用域查找自由变量，如果有则获取并结束。如果没有则继续；

  - 第二步，如果当前作用域是全局作用域，则证明自由变量未定义，结束；否则继续；

  - 第三步，（不是全局作用域，那就是函数作用域）将创建该函数的作用域作为当前作用域；

  - 第四步，跳转到第一步。

作用域链和原型继承查找时的区别：如果去查找一个普通对象的属性，但是在当前对象和其原型中都找不到时，会返回undefined；但查找的属性在作用域链中不存在的话就会抛出ReferenceError。

作用域链的顶端是全局对象，在全局环境中定义的变量就会绑定到全局对象中。















